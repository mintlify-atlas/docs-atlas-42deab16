---
title: 'Plugin System Overview'
description: 'Understanding how nvim-luffy manages plugins with Lazy.nvim'
icon: 'puzzle-piece'
---

## Introduction

nvim-luffy uses [Lazy.nvim](https://github.com/folke/lazy.nvim) as its plugin manager, providing a modern, fast, and feature-rich way to manage Neovim plugins. Lazy.nvim offers lazy-loading capabilities, automatic dependency resolution, and a clean UI for plugin management.

## Plugin Organization

All plugins are organized in the `lua/leyland/plugins/` directory:

```bash
lua/leyland/plugins/
├── init.lua              # Core dependencies
├── telescope.lua         # Fuzzy finder
├── harpoon.lua          # Quick file navigation
├── nvim-tree.lua        # File explorer
├── treesitter.lua       # Syntax highlighting
├── alpha.lua            # Dashboard with Luffy ASCII art
├── colorscheme.lua      # Theme configuration
├── nvim-cmp.lua         # Autocompletion
├── autopairs.lua        # Auto-close brackets
├── flash.lua            # Jump navigation
├── formatting.lua       # Code formatting
├── neogit.lua          # Git interface
├── diffview.lua        # Git diff viewer
├── trouble.lua         # Diagnostics list
├── snacks.lua          # UI enhancements
└── lsp/                # LSP configuration
    ├── lsp.lua
    └── mason.lua
```

<Note>
Each plugin file returns a Lua table that Lazy.nvim uses to install and configure the plugin. This modular approach makes it easy to add, remove, or modify plugins.
</Note>

## How Lazy.nvim Works

Lazy.nvim automatically loads plugin specifications from the `lua/leyland/plugins/` directory. Each file can return either:

1. **A single plugin spec** (table with plugin configuration)
2. **Multiple plugin specs** (array of tables)

### Plugin Spec Structure

```lua
return {
  "author/plugin-name",          -- GitHub repository
  branch = "main",               -- Optional: specific branch
  dependencies = { ... },        -- Optional: plugin dependencies
  lazy = false,                  -- Optional: load on startup
  event = "BufRead",            -- Optional: lazy-load on event
  keys = { ... },               -- Optional: lazy-load on keymap
  config = function() ... end,  -- Optional: configuration function
}
```

## Core Dependencies

From `lua/leyland/plugins/init.lua`:

```lua
return {
  "nvim-lua/plenary.nvim",              -- Lua utility functions
  "christoomey/vim-tmux-navigator",     -- Tmux integration
}
```

<Accordion title="What is plenary.nvim?">
plenary.nvim is a Lua utility library used by many popular Neovim plugins (like Telescope, Harpoon, etc.). It provides common functions for file operations, async jobs, and more.
</Accordion>

## Managing Plugins

### View Installed Plugins

Open the Lazy.nvim UI to see all installed plugins:

```vim
:Lazy
```

### Common Lazy Commands

<CodeGroup>
```vim Update All
:Lazy update
```

```vim Sync Plugins
:Lazy sync
```

```vim Clean Unused
:Lazy clean
```

```vim Check Health
:Lazy health
```
</CodeGroup>

### Plugin Actions in Lazy UI

Inside the `:Lazy` interface:

| Key | Action |
|-----|--------|
| `u` | Update plugin |
| `x` | Clear finished tasks |
| `l` | Show plugin log |
| `d` | Show diff |
| `p` | Show plugin details |
| `?` | Show help |

## Adding New Plugins

To add a new plugin:

1. Create a new file in `lua/leyland/plugins/` (e.g., `myplugin.lua`)
2. Return a plugin specification:

```lua
return {
  "author/plugin-name",
  config = function()
    -- Your configuration here
    require("plugin-name").setup({})
  end,
}
```

3. Restart Neovim or run `:Lazy sync`

<Warning>
Always check plugin documentation for proper configuration. Some plugins require specific dependencies or build steps.
</Warning>

## Lazy Loading Strategies

Lazy.nvim provides several ways to defer plugin loading for faster startup:

### Load on Event

```lua
return {
  "plugin-name",
  event = { "BufReadPre", "BufNewFile" },
}
```

### Load on Command

```lua
return {
  "plugin-name",
  cmd = "PluginCommand",
}
```

### Load on Keymap

```lua
return {
  "plugin-name",
  keys = {
    { "<leader>k", "<cmd>PluginCommand<cr>" },
  },
}
```

### Load on File Type

```lua
return {
  "plugin-name",
  ft = { "lua", "vim" },
}
```

## Plugin Categories

nvim-luffy plugins are organized by functionality:

<CardGroup cols={2}>
  <Card title="Navigation" icon="compass" href="/plugins/telescope">
    Telescope, Harpoon, Flash
  </Card>
  
  <Card title="File Management" icon="folder" href="/plugins/nvim-tree">
    nvim-tree file explorer
  </Card>
  
  <Card title="Syntax" icon="code" href="/plugins/treesitter">
    Treesitter highlighting
  </Card>
  
  <Card title="UI/UX" icon="palette" href="/plugins/alpha">
    Alpha dashboard, colorschemes
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Telescope" icon="magnifying-glass" href="/plugins/telescope">
    Learn about fuzzy finding files and text
  </Card>
  
  <Card title="Harpoon" icon="anchor" href="/plugins/harpoon">
    Master quick file navigation
  </Card>
  
  <Card title="nvim-tree" icon="folder-tree" href="/plugins/nvim-tree">
    Explore the file browser
  </Card>
  
  <Card title="Colorschemes" icon="paint-brush" href="/plugins/colorschemes">
    Customize your theme
  </Card>
</CardGroup>